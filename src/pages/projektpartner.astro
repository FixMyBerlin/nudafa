---
import { getCollection, getEntry } from "astro:content";
import PageHeader from "../components/PageHeader.astro";
import Layout from "../components/layouts/Layout.astro";
import { Image } from "astro:assets";
import Section from "../components/layouts/Section.astro";
import H2 from "../components/Text/H2.astro";
import PersonCardWrapper from "../components/PersonCardWrapper.astro";
import PersonCard from "../components/PersonCard.astro";

const page = await getEntry("projectpartnerpage", "index");
const { title, subTitle, mediaLinks } = page.data;
const { Content } = await page.render();

const persons = await getCollection("persons");
---

<Layout title={title}>
  <PageHeader title={title} subTitle={subTitle}>
    <Content />
  </PageHeader>
  <Section className="bg-[#FEF3C7]">
    <H2>Das NUDAFA-Team</H2>
    <PersonCardWrapper>
      {
        persons?.length!! &&
          persons.map((p) => (
            <PersonCard
              position={p.data.position}
              image={p.data.personImage}
              name={p.data.firstName + " " + p.data.name}
              institution={p.data.institution}
            />
          ))
      }
    </PersonCardWrapper>
  </Section>
</Layout>
