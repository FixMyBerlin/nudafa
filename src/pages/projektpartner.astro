---
import { getCollection, getEntry } from "astro:content";
import CommuneCard from "../components/CommuneCard.astro";
import CommuneCardWrapper from "../components/CommueCardWrapper.astro";
import ImageDouble from "../components/ImageDouble.astro";
import ImageSingleHorizontal from "../components/ImageSingleHorizontal.astro";
import ImageSingleSquare from "../components/ImageSingleSquare.astro";
import ImageSingleVertical from "../components/ImageSingleVertical.astro";
import PageHeader from "../components/PageHeader.astro";
import PersonCard from "../components/PersonCard.astro";
import PersonCardWrapper from "../components/PersonCardWrapper.astro";
import H2 from "../components/Text/H2.astro";
import Layout from "../components/layouts/Layout.astro";
import Section from "../components/layouts/Section.astro";
import TextLinkArrow from "../components/links/TextLinkArrow.astro";

const page = await getEntry("projectpartnerpage", "index");
const { title, subTitle, mediaLinks } = page.data;
const { Content } = await page.render();

const persons = await getCollection("persons");
const communes = await getCollection("communes");
---

<Layout title={title}>
  <PageHeader title={title} subTitle={subTitle}>
    <Content
      components={{
        ImageSingleHorizontal,
        ImageSingleSquare,
        ImageSingleVertical,
        ImageDouble,
        TextLinkArrow,
      }}
    />
  </PageHeader>
  <Section className="bg-[#FEF3C7]">
    <H2>Das NUDAFA-Team</H2>
    <PersonCardWrapper>
      {
        persons?.length!! &&
          persons.map((p) => (
            <PersonCard
              position={p.data.position}
              image={p.data.personImage}
              name={p.data.firstName + " " + p.data.name}
              institution={p.data.institution}
            />
          ))
      }
    </PersonCardWrapper>
  </Section>
  <Section className="bg-[#FEF3C7]">
    <H2>Das Unsere Partnerkommunen</H2>
    <CommuneCardWrapper>
      {
        communes?.length!! &&
          communes.map((p) => (
            <CommuneCard
              image={p.data.image}
              name={p.data.name}
              website={p.data.website}
            />
          ))
      }
    </CommuneCardWrapper>
  </Section>
</Layout>
